{"version":3,"file":"static/webpack/static/development/pages/player.js.5446605730ec1f0078e6.hot-update.js","sources":["webpack:///./pages/player.js"],"sourcesContent":["import React, {useState, useEffect} from 'react';\nimport Container from '@material-ui/core/Container';\nimport Typography from '@material-ui/core/Typography';\nimport Box from '@material-ui/core/Box';\nimport Button from '@material-ui/core/Button';\nimport TableView from '../src/table-view';\n\nimport db from '../services/db';\n\n// TODO: put in sep file\nconst columnMaps = {\n  player: 'Player Name',\n  date: 'Date',\n  item: 'Item',\n  itemID: 'Item ID',\n  itemString: 'Item String',\n  votes: 'Votes',\n  response: 'Response',\n  class: 'Class',\n  instance: 'Instance',\n  boss: 'Boss Name',\n  gear1: 'Prev Gear (slot 1)',\n  gear2: 'Prev Gear (slot 2)',\n  subType: 'Item Type',\n  equipLoc: 'Slot Type',\n  note: 'Reward Reasoning',\n  logid: 'Unique Log ID'\n};\n\nexport default function PlayerStats({query}) {\n  const [logsList, setLogsList] = useState();\n  const [orderBy, setOrderBy] = useState('date');\n  const [order, setOrder] = useState('DESC');\n  const playerName = query.name || 'Magi';\n  console.log('queryquery', query)\n\n  async function loadLogs() {\n    const result = db.execQuery(`SELECT date,item,note,response,instance,boss FROM lootlogs WHERE player LIKE \"%${playerName}%\" ORDER BY ${orderBy} ${order};`);\n    setLogsList(result[0]);\n  }\n\n  function onRequestSort(event, property) {\n    if (orderBy === property) {\n      setOrder(order === 'ASC' ? 'DESC' : 'ASC');\n    } else {\n      setOrderBy(property);\n      setOrder('DESC');\n    }\n\n    setLogsList(null);\n    loadLogs();\n  }\n\n  useEffect(() => {\n    if (!logsList) {\n      loadLogs();\n    }\n  }, []);\n\n  return (\n    <Box my={4}>\n      <Typography variant=\"h4\" component=\"h1\" gutterBottom>\n        Player: {playerName}\n      </Typography>\n\n      {/*\n        TODO: show box with player stats, overall data etc\n        */}\n\n      <br />\n\n      {logsList ? (\n        <>\n          <TableView\n            onRequestSort={onRequestSort}\n            columns={logsList.columns}\n            values={logsList.values}\n            columnMaps={columnMaps}\n            orderBy={orderBy}\n            order={order}\n          />\n        </>\n      ) : (\n        <>\n          Loading logs...\n        </>\n      )}\n    </Box>\n  );\n}\n\nPlayerStats.getInitialProps = ({query}) => {\n  return {query};\n};\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAhBA;AAmBA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AAGA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AACA;AACA;AACA;AACA;AACA;AANA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAgBA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AACA;;;;A","sourceRoot":""}